---
import i18nit from "$i18n";
import Icon from "$components/Icon.astro";

interface Props {
	/** Current locale/language code */
	locale: string;

	/** Array of link items to display in the roll */
	links: Array<{
		/** Display title of the link */
		title: string;

		/** Target URL of the link */
		url: string;

		/** Category type of the link */
		type: keyof typeof types;

		/** Optional image URL for the link avatar */
		image?: string;

		/** Optional description text for the link */
		description?: string;
	}>;
}

const { locale, links } = Astro.props;

const t = i18nit(locale, "roll");

const types = {
	resources: { name: t("type.resources"), icon: "lucide:tool-case" },
	community: { name: t("type.community"), icon: "lucide:network" },
	insights: { name: t("type.insights"), icon: "lucide:lightbulb" },
	technology: { name: t("type.technology"), icon: "lucide:terminal" },
	expertise: { name: t("type.expertise"), icon: "lucide:book-open-text" },
	creative: { name: t("type.creative"), icon: "lucide:palette" },
	lifestyle: { name: t("type.lifestyle"), icon: "lucide:coffee" },
	general: { name: t("type.general"), icon: "lucide:box" }
};
---

<main class="grid grid-cols-[repeat(auto-fill,14rem)] gap-4 my-4">
	{
		links.map(link => (
			<article class="flex gap-2 b-b b-b-solid b-weak pl-1 pr-2 pb-2">
				<img src={link.image ?? "https://cdn.pixabay.com/photo/2022/01/16/16/44/blogger-logo-6942640__480.png"} alt={`LinkRoll-${link.title}`} data-nozoom class="w-10 h-10 rd-full" />
				<div class="grow min-w-0 flex flex-col justify-around">
					<div class="flex items-center justify-between">
						<a href={link.url} target="_blank" rel="noopener noreferrer" class="font-bold after:hidden truncate">
							{link.title}
						</a>
						<Icon name={types[link.type].icon} title={types[link.type].name} size="0.9rem" />
					</div>
					{link.description && (
						<p title={link.description} class="text-xs c-secondary truncate">
							{link.description}
						</p>
					)}
				</div>
			</article>
		))
	}
</main>

<style lang="less">
	* {
		line-height: 1;
	}
</style>
